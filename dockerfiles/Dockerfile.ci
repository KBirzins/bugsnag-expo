# CI test image for unit/lint/type tests
FROM node:lts-alpine

RUN apk add --update bash

WORKDIR /app

COPY package*.json ./
RUN npm install

COPY babel.config.js lerna.json .eslintignore .eslintrc.js .eslintrc.ts.js ./
ADD min_packages.tar .
COPY bin ./bin
RUN npx lerna bootstrap
COPY packages ./packages
RUN npm run build
